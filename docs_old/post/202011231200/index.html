<!DOCTYPE html><head><title>python 简明教程 - 兴趣使然的无名小站</title><meta name="description" content=""><script src="/bundle.js" onload="[].flat||(location='/update.html')"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/default.min.css"></head><main><article><h1>python 简明教程</h1><h1>综述</h1>
<p>根据SICP，一门语言有以下模式：</p>
<ul>
<li><p><b>primitive expressions</b>, which represent the simplest entities the
language is concerned with,</p>
</li>
<li><p><b>means of combination</b>, by which compound elements are built
from simpler ones, and</p>
</li>
<li><p><b>means of abstraction</b>, by which compound elements can be named
and manipulated as units.</p>
</li>
</ul>
<p>在Python中，可以分为Lexical Analysis对应抽象方法（程序的骨架）、Data Model与Execution Model对应元标识符（程序的数据结构）、其他对应程序的算法。唯有Lexical Analysis是Python的特质。这里是Python的核心内容。这篇文章会夹杂一些文字，但是一定点到为止。</p>
<h1>Lexical Analysis</h1>
<blockquote>
<p>A Python program is read by a parser. Input to the parser is a stream of tokens, generated by the lexical analyzer.</p>
</blockquote>
<h2>Line Structure</h2>
<p>Python使用<b>行结构</b>。</p>
<h1>Class And Object</h1>
<blockquote>
<p>“被命名的类，称之为对象，对象因此与其他对象不同。”———qianxin</p>
</blockquote>
<h2>Scope</h2>
<p>在Python中，名字和对象是绑定起来的，而不是Copy.
Python与其他语言最大不同之处在于Python没有private, protected, public,而只有local, nonlocal, global。python中nonlocal的功能是<b>使用外层（而非内部的）变量</b>。
The global statement can be used to indicate that particular variables live in the global scope and should be rebound there; the nonlocal statement indicates that particular variables live in an enclosing scope and should be rebound there.
nonlocal为python3特有</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">scope_test</span>():
      <span class="hljs-keyword">def</span> <span class="hljs-title function_">do_local</span>():
            spam = <span class="hljs-string">&quot;local spam&quot;</span>
      <span class="hljs-keyword">def</span> <span class="hljs-title function_">do_nonlocal</span>():
            //<span class="hljs-keyword">not</span> <span class="hljs-string">&quot;local spam&quot;</span>
            <span class="hljs-keyword">nonlocal</span> spam
            spam = <span class="hljs-string">&quot;nonlocal spam&quot;</span>
      <span class="hljs-keyword">def</span> <span class="hljs-title function_">do_global</span>():
            <span class="hljs-keyword">global</span> spam
            spam = <span class="hljs-string">&quot;global spam&quot;</span>

spam = <span class="hljs-string">&quot;test spam&quot;</span>
do_local()
<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;After local assignment:&quot;</span>, spam)
do_nonlocal()
<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;After nonlocal assignment:&quot;</span>, spam)
do_global()
<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;After global assignment:&quot;</span>, spam)
scope_test()
<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;In global scope:&quot;</span>, spam)
</code></pre><p>output:</p>
<pre><code class="hljs language-bash">After <span class="hljs-built_in">local</span> assignment: <span class="hljs-built_in">test</span> spam
After nonlocal assignment: nonlocal spam
After global assignment: nonlocal spam
In global scope: global spam
</code></pre><h2>Class Objects</h2>
<pre><code class="hljs language-python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Complex</span>():
      flag = <span class="hljs-string">&quot;Complex&quot;</span>
      <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, realpart, imagpart</span>):
            self.r = realpart
            self.i = imagpart

c = Complex(<span class="hljs-number">5.0</span>,<span class="hljs-number">3.0</span>)
d = Complex(<span class="hljs-number">4.2</span>,<span class="hljs-number">1.5</span>)
c.r,c.i
c.flag,d.flag
</code></pre><pre><code class="hljs language-bash">(5.0,3.0)
(<span class="hljs-string">&#x27;Complex&#x27;</span>,<span class="hljs-string">&#x27;Complex&#x27;</span>)
</code></pre><h1>Data Structure</h1>
<h2>List[]</h2>
<p>count(),index(),reverse().</p>
<pre><code class="hljs language-python"> fruits = [<span class="hljs-string">&#x27;orange&#x27;</span>, <span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;pear&#x27;</span>, <span class="hljs-string">&#x27;banana&#x27;</span>, <span class="hljs-string">&#x27;kiwi&#x27;</span>, <span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;banana&#x27;</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>fruits.count(<span class="hljs-string">&#x27;apple&#x27;</span>)
<span class="hljs-number">2</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>fruits.count(<span class="hljs-string">&#x27;tangerine&#x27;</span>)
<span class="hljs-number">0</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>fruits.index(<span class="hljs-string">&#x27;banana&#x27;</span>)
<span class="hljs-number">3</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>fruits.index(<span class="hljs-string">&#x27;banana&#x27;</span>, <span class="hljs-number">4</span>) <span class="hljs-comment"># Find next banana starting a position 4</span>
<span class="hljs-number">6</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>fruits.reverse()
<span class="hljs-meta">&gt;&gt;&gt; </span>fruits
[<span class="hljs-string">&#x27;banana&#x27;</span>, <span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;kiwi&#x27;</span>, <span class="hljs-string">&#x27;banana&#x27;</span>, <span class="hljs-string">&#x27;pear&#x27;</span>, <span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;orange&#x27;</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>fruits.append(<span class="hljs-string">&#x27;grape&#x27;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>fruits
[<span class="hljs-string">&#x27;banana&#x27;</span>, <span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;kiwi&#x27;</span>, <span class="hljs-string">&#x27;banana&#x27;</span>, <span class="hljs-string">&#x27;pear&#x27;</span>, <span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;orange&#x27;</span>, <span class="hljs-string">&#x27;grape&#x27;</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>fruits.sort()
<span class="hljs-meta">&gt;&gt;&gt; </span>fruits
[<span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;banana&#x27;</span>, <span class="hljs-string">&#x27;banana&#x27;</span>, <span class="hljs-string">&#x27;grape&#x27;</span>, <span class="hljs-string">&#x27;kiwi&#x27;</span>, <span class="hljs-string">&#x27;orange&#x27;</span>, <span class="hljs-string">&#x27;pear&#x27;</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>fruits.pop()
<span class="hljs-string">&#x27;pear&#x27;</span>
</code></pre><h3>List(Stack)</h3>
<p>append(), pop()</p>
<pre><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span>stack = [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>stack.append(<span class="hljs-number">6</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>stack.append(<span class="hljs-number">7</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>stack
[<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>stack.pop()
<span class="hljs-number">7</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>stack
[<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>stack.pop()
<span class="hljs-number">6</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>stack.pop()
<span class="hljs-number">5</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>stack
[<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
</code></pre><h3>List(Queue)</h3>
<pre><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque
<span class="hljs-meta">&gt;&gt;&gt; </span>queue = deque([<span class="hljs-string">&quot;Eric&quot;</span>, <span class="hljs-string">&quot;John&quot;</span>, <span class="hljs-string">&quot;Michael&quot;</span>])
<span class="hljs-meta">&gt;&gt;&gt; </span>queue.append(<span class="hljs-string">&quot;Terry&quot;</span>)
 <span class="hljs-comment"># Terry arrives</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>queue.append(<span class="hljs-string">&quot;Graham&quot;</span>)
 <span class="hljs-comment"># Graham arrives</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>queue.popleft()
 <span class="hljs-comment"># The first to arrive now leaves</span>
<span class="hljs-string">&#x27;Eric&#x27;</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>queue.popleft()
 <span class="hljs-comment"># The second to arrive now leaves</span>
<span class="hljs-string">&#x27;John&#x27;</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>queue
 <span class="hljs-comment"># Remaining queue in order of arrival</span>
deque([<span class="hljs-string">&#x27;Michael&#x27;</span>, <span class="hljs-string">&#x27;Terry&#x27;</span>, <span class="hljs-string">&#x27;Graham&#x27;</span>])
</code></pre><h3>List(Range() ，listcomp，del statement)</h3>
<pre><code class="hljs language-python"><span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]:
        ...
        <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> [<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>]:
              ...
              <span class="hljs-keyword">if</span> x != y:
                     (x,y)
</code></pre><pre><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span>[(x, y) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>] <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> [<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>] <span class="hljs-keyword">if</span> x != y]
[(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">4</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">4</span>), (<span class="hljs-number">3</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)]
</code></pre><pre><code class="hljs language-python">a = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]
<span class="hljs-keyword">del</span> a[<span class="hljs-number">5</span>:]
a
</code></pre><pre><code class="hljs language-bash">[0,1,2,3,4]
</code></pre><h2>Tuple(Real Sequence)()</h2>
<p>广义表数据类型，不限制原子类型</p>
<pre><code class="hljs language-python">t = <span class="hljs-number">12345</span>, <span class="hljs-number">54321</span>, <span class="hljs-string">&#x27;hello!&#x27;</span>
t
u = t, (<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>)
u
<span class="hljs-comment"># Error! Imutable! </span>
<span class="hljs-comment"># t[0] = 88888</span>

<span class="hljs-comment"># But can contain mutable objects:</span>
v = ([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>], [<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>])
v[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] = <span class="hljs-number">88888</span>
v
</code></pre><pre><code class="hljs language-bash">(12345, 54321, <span class="hljs-string">&#x27;hello!&#x27;</span>)
((<span class="hljs-number">12345</span>, <span class="hljs-number">54321</span>, &#x27;hello!&#x27;),(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>))
([1,88888,3],[4,5,6])
</code></pre><p>Singleton和Tuple Packing</p>
<pre><code class="hljs language-python">empty = ()
singleton = <span class="hljs-string">&#x27;hello&#x27;</span>,
<span class="hljs-built_in">len</span>(empty)
<span class="hljs-built_in">len</span>(singleton)
singleton

x,y,z = t
x
y
z
</code></pre><pre><code class="hljs language-bash">0
1
(<span class="hljs-string">&#x27;hello&#x27;</span>,)
12345
54321
<span class="hljs-string">&#x27;hello!&#x27;</span>
</code></pre><h2>Set{}</h2>
<p>A set is an unordered collection with no duplicate elements.</p>
<p>set(), in()</p>
<pre><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span>basket = {<span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;orange&#x27;</span>, <span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;pear&#x27;</span>, <span class="hljs-string">&#x27;orange&#x27;</span>, <span class="hljs-string">&#x27;banana&#x27;</span>}
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(basket)
 <span class="hljs-comment"># show that duplicates have been removed</span>
{<span class="hljs-string">&#x27;orange&#x27;</span>, <span class="hljs-string">&#x27;banana&#x27;</span>, <span class="hljs-string">&#x27;pear&#x27;</span>, <span class="hljs-string">&#x27;apple&#x27;</span>}
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;orange&#x27;</span> <span class="hljs-keyword">in</span> basket
<span class="hljs-literal">True</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;crabgrass&#x27;</span> <span class="hljs-keyword">in</span> basket
<span class="hljs-literal">False</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>a = <span class="hljs-built_in">set</span>(<span class="hljs-string">&#x27;abracadabra&#x27;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>b = <span class="hljs-built_in">set</span>(<span class="hljs-string">&#x27;alacazam&#x27;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>a
{<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;d&#x27;</span>}
<span class="hljs-meta">&gt;&gt;&gt; </span>a - b
 <span class="hljs-comment"># letters in a but not in b</span>
{<span class="hljs-string">&#x27;r&#x27;</span>, <span class="hljs-string">&#x27;d&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>}
<span class="hljs-meta">&gt;&gt;&gt; </span>a | b
 <span class="hljs-comment"># letters in a or b or both</span>
{<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>, <span class="hljs-string">&#x27;d&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;m&#x27;</span>, <span class="hljs-string">&#x27;z&#x27;</span>, <span class="hljs-string">&#x27;l&#x27;</span>}
</code></pre><pre><code class="hljs language-python">a = {x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;abracadabra&#x27;</span> <span class="hljs-keyword">if</span> x <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;abc&#x27;</span>}
</code></pre><h2>Dictionaries{x:y}</h2>
<p>可以给值赋值，不能改键值（Set不能改元素）
del statement, in, 
list()返回List类型, 
sorted()返回排序后的List</p>
<pre><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span>tel = {<span class="hljs-string">&#x27;jack&#x27;</span>: <span class="hljs-number">4098</span>, <span class="hljs-string">&#x27;sape&#x27;</span>: <span class="hljs-number">4139</span>}
<span class="hljs-meta">&gt;&gt;&gt; </span>tel[<span class="hljs-string">&#x27;guido&#x27;</span>] = <span class="hljs-number">4127</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>tel
{<span class="hljs-string">&#x27;jack&#x27;</span>: <span class="hljs-number">4098</span>, <span class="hljs-string">&#x27;sape&#x27;</span>: <span class="hljs-number">4139</span>, <span class="hljs-string">&#x27;guido&#x27;</span>: <span class="hljs-number">4127</span>}
<span class="hljs-meta">&gt;&gt;&gt; </span>tel[<span class="hljs-string">&#x27;jack&#x27;</span>]
<span class="hljs-number">4098</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">del</span> tel[<span class="hljs-string">&#x27;sape&#x27;</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>tel[<span class="hljs-string">&#x27;irv&#x27;</span>] = <span class="hljs-number">4127</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>tel
{<span class="hljs-string">&#x27;jack&#x27;</span>: <span class="hljs-number">4098</span>, <span class="hljs-string">&#x27;guido&#x27;</span>: <span class="hljs-number">4127</span>, <span class="hljs-string">&#x27;irv&#x27;</span>: <span class="hljs-number">4127</span>}
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(tel)
[<span class="hljs-string">&#x27;jack&#x27;</span>, <span class="hljs-string">&#x27;guido&#x27;</span>, <span class="hljs-string">&#x27;irv&#x27;</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">sorted</span>(tel)
[<span class="hljs-string">&#x27;guido&#x27;</span>, <span class="hljs-string">&#x27;irv&#x27;</span>, <span class="hljs-string">&#x27;jack&#x27;</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;guido&#x27;</span> <span class="hljs-keyword">in</span> tel
<span class="hljs-literal">True</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;jack&#x27;</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> tel
<span class="hljs-literal">False</span>
</code></pre><pre><code class="hljs language-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">dict</span>([(<span class="hljs-string">&#x27;sape&#x27;</span>, <span class="hljs-number">4139</span>), (<span class="hljs-string">&#x27;guido&#x27;</span>, <span class="hljs-number">4127</span>), (<span class="hljs-string">&#x27;jack&#x27;</span>, <span class="hljs-number">4098</span>)])
{<span class="hljs-string">&#x27;sape&#x27;</span>: <span class="hljs-number">4139</span>, <span class="hljs-string">&#x27;guido&#x27;</span>: <span class="hljs-number">4127</span>, <span class="hljs-string">&#x27;jack&#x27;</span>: <span class="hljs-number">4098</span>}

<span class="hljs-meta">&gt;&gt;&gt; </span>{x: x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> (<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>)}
{<span class="hljs-number">2</span>: <span class="hljs-number">4</span>, <span class="hljs-number">4</span>: <span class="hljs-number">16</span>, <span class="hljs-number">6</span>: <span class="hljs-number">36</span>}
</code></pre></article></main>